{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"C:/Users/HO_CHUN_WEI/Desktop/web/Jose-Antonio_LoverBus/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/HO_CHUN_WEI/Desktop/web/Jose-Antonio_LoverBus/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/HO_CHUN_WEI/Desktop/web/Jose-Antonio_LoverBus/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useCallback}from\"react\";import{useHistory}from'react-router-dom';import{useQuery,useMutation}from'@apollo/react-hooks';import MapBox from\"../components/Mapbox_TW\";import AddPlace from\"../components/AddPlace\";import SearchInfo from\"../components/SearchInfo\";import{Form,Checkbox,Input,Layout,Menu,Breadcrumb,Button,Drawer,Col,Row,Select,DatePicker}from'antd';import{LockOutlined,UserOutlined,PictureOutlined,EnvironmentOutlined,PlusOutlined}from'@ant-design/icons';import{BrowserRouter as Router,Switch,Route,Link,useRouteMatch,useParams}from\"react-router-dom\";import TourPlan from\"./TourPlan\";import\"./TourMap.css\";import'antd/dist/antd.css';import'./Login.css';import{//     // for query\n//     MARKER_QUERY,\n//     PLAN_QUERY,\nSIGNIN_QUERY//     // for mutation\n//     ADD_MARKER_MUTATION,\n//     DELETE_MARKER_MUTATION,\n//     UPDATE_MARKER_MUTATION,\n//     NEW_PLAN_MUTATION,\n//     RENAME_PLAN_MUTATION,\n//     DELETE_PLAN_MUTATION,\n//     NEW_SPOT_MUTATION,\n//     delete_Spot_MUTATION,\n//     UPDATE_SPOTSTARTTIME_MUTATION,\n//     UPDATE_SPOTENDTIME_MUTATION,\n,SIGNUP_MUTATION//     // for subscription\n}from'../graphql';// import { Switch } from \"@material-ui/core\"\nexport default function Login(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),register=_useState6[0],setRegister=_useState6[1];var _useQuery=useQuery(SIGNIN_QUERY,{variables:{username:username,password:password}}),signIndata=_useQuery.data,signInError=_useQuery.error;var _useMutation=useMutation(SIGNUP_MUTATION),_useMutation2=_slicedToArray(_useMutation,1),signUp=_useMutation2[0];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),regisUsername=_useState8[0],setRegisUsername=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),regisPassword=_useState10[0],setRegisPassword=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),regisRetype=_useState12[0],setRegisRetype=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),showUsermMenu=_useState14[0],setShowUsermMenu=_useState14[1];var history=useHistory();// const handleRout = useCallback(() => history.push(`/${signIndata}`), [history]);\nvar onFinish=function onFinish(values){setUsername(values.username);setPassword(values.password);};useEffect(function(){if(signIndata)history.push(\"/\".concat(signIndata.signIn));},[signIndata]);useEffect(function(){if(!signInError||!username)return;alert(signInError.message);},[signInError]);var enter_registerAccount=function enter_registerAccount(event){if(event.keyCode===13){registerAccount();}};var registerAccount=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(regisUsername===\"\")){_context.next=3;break;}alert(\"Please enter username\");return _context.abrupt(\"return\");case 3:if(!(regisPassword===\"\")){_context.next=6;break;}alert(\"Please enter password\");return _context.abrupt(\"return\");case 6:if(!(regisRetype===\"\")){_context.next=9;break;}alert(\"Please retype password\");return _context.abrupt(\"return\");case 9:if(!(regisPassword!==regisRetype)){_context.next=12;break;}alert(\"Password mismatch\");return _context.abrupt(\"return\");case 12:_context.prev=12;_context.next=15;return signUp({variables:{username:regisUsername,password:regisPassword}});case 15:alert(\"Welcome to join us, \".concat(regisUsername,\"!\"));setRegister(false);_context.next=23;break;case 19:_context.prev=19;_context.t0=_context[\"catch\"](12);alert(_context.t0);return _context.abrupt(\"return\");case 23:case\"end\":return _context.stop();}}},_callee,null,[[12,19]]);}));return function registerAccount(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"login-background\",children:/*#__PURE__*/_jsx(\"div\",{className:\"login-root\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"login-section\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"login-title\",children:\"Welcome to Jose Antonio LoverBus !\"}),/*#__PURE__*/_jsxs(Form,{name:\"normal_login\",className:\"login-form\",initialValues:{remember:true},onFinish:onFinish// summit user info\n,children:[/*#__PURE__*/_jsx(Form.Item,{name:\"username\",rules:[{required:true,message:'Please input your Username!'}],children:/*#__PURE__*/_jsx(Input,{prefix:/*#__PURE__*/_jsx(UserOutlined,{className:\"site-form-item-icon\"}),placeholder:\"Username\"})}),/*#__PURE__*/_jsx(Form.Item,{name:\"password\",rules:[{required:true,message:'Please input your Password!'}],children:/*#__PURE__*/_jsx(Input,{prefix:/*#__PURE__*/_jsx(LockOutlined,{className:\"site-form-item-icon\"}),type:\"password\",placeholder:\"Password\"})}),/*#__PURE__*/_jsx(Form.Item,{children:/*#__PURE__*/_jsx(Form.Item,{name:\"remember\",valuePropName:\"checked\",noStyle:true,children:/*#__PURE__*/_jsx(Checkbox,{children:\"Remember me\"})})}),/*#__PURE__*/_jsxs(Form.Item,{children:[/*#__PURE__*/_jsx(Button,{type:\"primary\",htmlType:\"submit\",className:\"login-form-button\",children:\"Log in\"}),\"Or\",/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(\"a\",{className:\"register-link\",onClick:function onClick(){return setRegister(true);},children:\"Register Now\"}),/*#__PURE__*/_jsx(Drawer,{title:\"Create a new account\",width:360,onClose:function onClose(){return setRegister(false);},visible:register,bodyStyle:{paddingBottom:80},footer:/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'right'},children:[/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return setRegister(false);},style:{marginRight:8},children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{onClick:registerAccount,type:\"primary\",children:\"Submit\"})]}),children:/*#__PURE__*/_jsxs(Form,{layout:\"vertical\",hideRequiredMark:true,children:[/*#__PURE__*/_jsx(Row,{gutter:16,children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Form.Item,{name:\"username\",label:\"Username\",rules:[{required:true,message:'Please enter username'}],children:/*#__PURE__*/_jsx(Input,{placeholder:\"Please enter username\",onChange:function onChange(e){return setRegisUsername(e.target.value);},onKeyUp:enter_registerAccount})})})}),/*#__PURE__*/_jsx(Row,{gutter:16,children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Form.Item,{name:\"password\",label:\"Password\",rules:[{required:true,message:'Please enter password'}],children:/*#__PURE__*/_jsx(Input,{placeholder:\"Please enter password\",type:\"password\",onChange:function onChange(e){return setRegisPassword(e.target.value);},onKeyUp:enter_registerAccount})})})}),/*#__PURE__*/_jsx(Row,{gutter:16,children:/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Form.Item,{name:\"Retype password\",label:\"Retype Password\",rules:[{required:true,message:'Please retype password'}],children:/*#__PURE__*/_jsx(Input,{placeholder:\"Please retype your password\",type:\"password\",onChange:function onChange(e){return setRegisRetype(e.target.value);},onKeyUp:enter_registerAccount})})})})]})})]})]})]})]})})})});}","map":{"version":3,"sources":["C:/Users/HO_CHUN_WEI/Desktop/web/Jose-Antonio_LoverBus/src/containers/Login.js"],"names":["React","useState","useEffect","useCallback","useHistory","useQuery","useMutation","MapBox","AddPlace","SearchInfo","Form","Checkbox","Input","Layout","Menu","Breadcrumb","Button","Drawer","Col","Row","Select","DatePicker","LockOutlined","UserOutlined","PictureOutlined","EnvironmentOutlined","PlusOutlined","BrowserRouter","Router","Switch","Route","Link","useRouteMatch","useParams","TourPlan","SIGNIN_QUERY","SIGNUP_MUTATION","Login","username","setUsername","password","setPassword","register","setRegister","variables","signIndata","data","signInError","error","signUp","regisUsername","setRegisUsername","regisPassword","setRegisPassword","regisRetype","setRegisRetype","showUsermMenu","setShowUsermMenu","history","onFinish","values","push","signIn","alert","message","enter_registerAccount","event","keyCode","registerAccount","remember","required","paddingBottom","textAlign","marginRight","e","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useCallback } from \"react\"\r\nimport {useHistory} from 'react-router-dom';\r\nimport { useQuery, useMutation } from '@apollo/react-hooks'\r\nimport MapBox from \"../components/Mapbox_TW\"\r\nimport AddPlace from \"../components/AddPlace\"\r\nimport SearchInfo from \"../components/SearchInfo\"\r\nimport { Form, Checkbox, Input, Layout, Menu, Breadcrumb, Button, \r\n    Drawer, Col, Row, Select, DatePicker } from 'antd';\r\nimport { LockOutlined, UserOutlined, PictureOutlined, EnvironmentOutlined, PlusOutlined} from '@ant-design/icons';\r\n\r\nimport {\r\n    BrowserRouter as Router,\r\n    Switch,\r\n    Route,\r\n    Link,\r\n    useRouteMatch,\r\n    useParams\r\n} from \"react-router-dom\"; \r\nimport TourPlan from \"./TourPlan\"\r\n\r\nimport \"./TourMap.css\"\r\nimport 'antd/dist/antd.css'\r\nimport './Login.css'\r\n\r\nimport {\r\n//     // for query\r\n//     MARKER_QUERY,\r\n//     PLAN_QUERY,\r\n    SIGNIN_QUERY,\r\n//     // for mutation\r\n//     ADD_MARKER_MUTATION,\r\n//     DELETE_MARKER_MUTATION,\r\n//     UPDATE_MARKER_MUTATION,\r\n//     NEW_PLAN_MUTATION,\r\n//     RENAME_PLAN_MUTATION,\r\n//     DELETE_PLAN_MUTATION,\r\n//     NEW_SPOT_MUTATION,\r\n//     delete_Spot_MUTATION,\r\n//     UPDATE_SPOTSTARTTIME_MUTATION,\r\n//     UPDATE_SPOTENDTIME_MUTATION,\r\n    SIGNUP_MUTATION\r\n//     // for subscription\r\n  } from '../graphql'\r\n// import { Switch } from \"@material-ui/core\"\r\n\r\n\r\nexport default function Login(){\r\n    const [username, setUsername] = useState(\"\")\r\n    const [password, setPassword] = useState(\"\")\r\n    const [register, setRegister] = useState(false)\r\n    const {data:signIndata, error:signInError} = useQuery(SIGNIN_QUERY, {variables: {username, password}})\r\n    const [signUp]= useMutation(SIGNUP_MUTATION)\r\n    const[regisUsername, setRegisUsername] = useState(\"\")\r\n    const[regisPassword, setRegisPassword] = useState(\"\")\r\n    const[regisRetype, setRegisRetype] = useState(\"\")\r\n    const [showUsermMenu, setShowUsermMenu] = useState(false)\r\n\r\n    const history = useHistory();\r\n    // const handleRout = useCallback(() => history.push(`/${signIndata}`), [history]);\r\n\r\n    const onFinish = (values) => {\r\n        setUsername(values.username)\r\n        setPassword(values.password)\r\n    };\r\n\r\n    useEffect(() => {\r\n        if(signIndata) history.push(`/${signIndata.signIn}`)\r\n    }, [signIndata])\r\n\r\n    useEffect(() =>{\r\n        if(!signInError || !username) return\r\n        alert(signInError.message)\r\n    }, [signInError])\r\n    const enter_registerAccount = (event)=>{\r\n        if(event.keyCode===13){\r\n            registerAccount()\r\n        }\r\n    }\r\n    const registerAccount = async () => {\r\n        if(regisUsername === \"\"){\r\n            alert(\"Please enter username\")\r\n            return\r\n        }\r\n        if(regisPassword === \"\"){\r\n            alert(\"Please enter password\")\r\n            return\r\n        }\r\n        if(regisRetype === \"\"){\r\n            alert(\"Please retype password\")\r\n            return\r\n        }\r\n        if(regisPassword !== regisRetype){\r\n            alert(\"Password mismatch\")\r\n            return\r\n        }\r\n        try{\r\n            await signUp({variables: {username: regisUsername, password: regisPassword}})\r\n            alert(`Welcome to join us, ${regisUsername}!`)\r\n            setRegister(false)\r\n        }\r\n        catch(err){\r\n            alert(err)\r\n            return\r\n        }\r\n    }\r\n    return (\r\n    <React.Fragment>\r\n        <div className='login-background'>\r\n        <div className='login-root'>\r\n            <div className='login-section'>\r\n                <h5 className='login-title'>Welcome to Jose Antonio LoverBus !</h5>\r\n                <Form \r\n                name=\"normal_login\"\r\n                className=\"login-form\"\r\n                initialValues={{\r\n                    remember: true,\r\n                }}\r\n                onFinish={onFinish} // summit user info\r\n                >\r\n                <Form.Item\r\n                    name=\"username\"\r\n                    rules={[\r\n                    {\r\n                        required: true,\r\n                        message: 'Please input your Username!',\r\n                    },\r\n                    ]}\r\n                >\r\n                    <Input prefix={<UserOutlined className=\"site-form-item-icon\" />} placeholder=\"Username\" />\r\n                </Form.Item>\r\n                <Form.Item\r\n                    name=\"password\"\r\n                    rules={[\r\n                    {\r\n                        required: true,\r\n                        message: 'Please input your Password!',\r\n                    },\r\n                    ]}\r\n                >\r\n                    <Input\r\n                    prefix={<LockOutlined className=\"site-form-item-icon\" />}\r\n                    type=\"password\"\r\n                    placeholder=\"Password\"\r\n                    />\r\n                </Form.Item>\r\n                <Form.Item>\r\n                    <Form.Item name=\"remember\" valuePropName=\"checked\" noStyle>\r\n                    <Checkbox>Remember me</Checkbox>\r\n                    </Form.Item>\r\n                </Form.Item>\r\n\r\n                <Form.Item>\r\n                    <Button type=\"primary\" htmlType=\"submit\" className=\"login-form-button\">\r\n                    Log in\r\n                    </Button>\r\n                    Or  \r\n                    <React.Fragment>\r\n                        <a className='register-link' onClick={() => setRegister(true)}>\r\n                            Register Now\r\n                        </a>\r\n                        <Drawer\r\n                            title=\"Create a new account\"\r\n                            width={360}\r\n                            onClose={() => setRegister(false)}\r\n                            visible={register}\r\n                            bodyStyle={{ paddingBottom: 80 }}\r\n                            footer={\r\n                                <div\r\n                                    style={{\r\n                                        textAlign: 'right',\r\n                                }}\r\n                            >\r\n                                <Button onClick={() => setRegister(false)} style={{ marginRight: 8 }}>\r\n                                    Cancel\r\n                                </Button>\r\n                                <Button onClick={registerAccount} type=\"primary\">\r\n                                    Submit\r\n                                </Button>\r\n                            </div>\r\n                        }\r\n                        >\r\n                            <Form layout=\"vertical\" hideRequiredMark>\r\n                                <Row gutter={16}>\r\n                                    <Col>\r\n                                        <Form.Item\r\n                                            name=\"username\"\r\n                                            label=\"Username\"\r\n                                            rules={[{ required: true, message: 'Please enter username' }]}\r\n                                            >\r\n                                            <Input placeholder=\"Please enter username\"\r\n                                                onChange={e=>setRegisUsername(e.target.value)}\r\n                                                onKeyUp={enter_registerAccount}\r\n                                            />\r\n                                        </Form.Item>\r\n                                    </Col>\r\n                                </Row>\r\n                                <Row gutter={16}>\r\n                                    <Col>\r\n                                        <Form.Item\r\n                                            name=\"password\"\r\n                                            label=\"Password\"\r\n                                            rules={[{ required: true, message: 'Please enter password' }]}\r\n                                            >\r\n                                            <Input placeholder=\"Please enter password\" type=\"password\"\r\n                                                onChange={e=>setRegisPassword(e.target.value)}\r\n                                                onKeyUp={enter_registerAccount}\r\n                                            />\r\n                                        </Form.Item>\r\n                                    </Col>\r\n                                </Row>\r\n                                <Row gutter={16}>\r\n                                    <Col>\r\n                                        <Form.Item\r\n                                            name=\"Retype password\"\r\n                                            label=\"Retype Password\"\r\n                                            rules={[{ required: true, message: 'Please retype password' }]}\r\n                                            >\r\n                                            <Input placeholder=\"Please retype your password\" type=\"password\"\r\n                                                onChange={e=>setRegisRetype(e.target.value)}\r\n                                                onKeyUp={enter_registerAccount}\r\n                                            />\r\n                                        </Form.Item>\r\n                                    </Col>\r\n                                </Row>\r\n                            </Form>\r\n                        </Drawer>\r\n                    </React.Fragment>\r\n                </Form.Item>\r\n                </Form>\r\n                </div>\r\n            </div>\r\n            </div>\r\n    </React.Fragment>\r\n    )\r\n\r\n}"]},"metadata":{},"sourceType":"module"}