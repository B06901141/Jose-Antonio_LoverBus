{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\HO_CHUN_WEI\\\\Desktop\\\\web\\\\Jose-Antonio_LoverBus\\\\src\\\\containers\\\\Login.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport { useHistory } from 'react-router-dom';\nimport { useQuery, useMutation } from '@apollo/react-hooks';\nimport MapBox from \"../components/Mapbox_TW\";\nimport AddPlace from \"../components/AddPlace\";\nimport SearchInfo from \"../components/SearchInfo\";\nimport { Form, Checkbox, Input, Layout, Menu, Breadcrumb, Button, Drawer, Col, Row, Select, DatePicker } from 'antd';\nimport { LockOutlined, UserOutlined, PictureOutlined, EnvironmentOutlined, PlusOutlined } from '@ant-design/icons';\nimport { BrowserRouter as Router, Switch, Route, Link, useRouteMatch, useParams } from \"react-router-dom\";\nimport TourPlan from \"./TourPlan\";\nimport \"./TourMap.css\";\nimport 'antd/dist/antd.css';\nimport './Login.css';\nimport { //     // for query\n//     MARKER_QUERY,\n//     PLAN_QUERY,\nSIGNIN_QUERY //     // for mutation\n//     ADD_MARKER_MUTATION,\n//     DELETE_MARKER_MUTATION,\n//     UPDATE_MARKER_MUTATION,\n//     NEW_PLAN_MUTATION,\n//     RENAME_PLAN_MUTATION,\n//     DELETE_PLAN_MUTATION,\n//     NEW_SPOT_MUTATION,\n//     delete_Spot_MUTATION,\n//     UPDATE_SPOTSTARTTIME_MUTATION,\n//     UPDATE_SPOTENDTIME_MUTATION,\n, SIGNUP_MUTATION //     // for subscription\n} from '../graphql'; // import { Switch } from \"@material-ui/core\"\n\nexport default function Login() {\n  _s();\n\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [register, setRegister] = useState(false);\n  const {\n    data: signIndata,\n    error: signInError\n  } = useQuery(SIGNIN_QUERY, {\n    variables: {\n      username,\n      password\n    }\n  });\n  const [signUp] = useMutation(SIGNUP_MUTATION);\n  const [regisUsername, setRegisUsername] = useState(\"\");\n  const [regisPassword, setRegisPassword] = useState(\"\");\n  const [regisRetype, setRegisRetype] = useState(\"\");\n  const [showUsermMenu, setShowUsermMenu] = useState(false);\n  const history = useHistory(); // const handleRout = useCallback(() => history.push(`/${signIndata}`), [history]);\n\n  const onFinish = values => {\n    setUsername(values.username);\n    setPassword(values.password);\n  };\n\n  useEffect(() => {\n    console.log(signIndata);\n    if (signIndata) history.push(`/${signIndata.signIn}`);\n  }, [signIndata]);\n  useEffect(() => {\n    if (!signInError || !username) return;\n    alert(signInError.message);\n  }, [signInError]);\n\n  const enter_registerAccount = event => {\n    if (event.keyCode === 13) {\n      registerAccount();\n    }\n  };\n\n  const registerAccount = async () => {\n    if (regisUsername === \"\") {\n      alert(\"Please enter username\");\n      return;\n    }\n\n    if (regisPassword === \"\") {\n      alert(\"Please enter password\");\n      return;\n    }\n\n    if (regisRetype === \"\") {\n      alert(\"Please retype password\");\n      return;\n    }\n\n    if (regisPassword !== regisRetype) {\n      alert(\"Password mismatch\");\n      return;\n    }\n\n    try {\n      await signUp({\n        variables: {\n          username: regisUsername,\n          password: regisPassword\n        }\n      });\n      alert(`Welcome to join us, ${regisUsername}!`);\n      setRegister(false);\n    } catch (err) {\n      alert(err);\n      return;\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"login-background\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"login-root\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"login-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n            className: \"login-title\",\n            children: \"Welcome to Jose Antonio LoverBus !\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Form, {\n            name: \"normal_login\",\n            className: \"login-form\",\n            initialValues: {\n              remember: true\n            },\n            onFinish: onFinish // summit user info\n            ,\n            children: [/*#__PURE__*/_jsxDEV(Form.Item, {\n              name: \"username\",\n              rules: [{\n                required: true,\n                message: 'Please input your Username!'\n              }],\n              children: /*#__PURE__*/_jsxDEV(Input, {\n                prefix: /*#__PURE__*/_jsxDEV(UserOutlined, {\n                  className: \"site-form-item-icon\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 130,\n                  columnNumber: 36\n                }, this),\n                placeholder: \"Username\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 130,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 121,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n              name: \"password\",\n              rules: [{\n                required: true,\n                message: 'Please input your Password!'\n              }],\n              children: /*#__PURE__*/_jsxDEV(Input, {\n                prefix: /*#__PURE__*/_jsxDEV(LockOutlined, {\n                  className: \"site-form-item-icon\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 142,\n                  columnNumber: 29\n                }, this),\n                type: \"password\",\n                placeholder: \"Password\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 141,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 132,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n              children: /*#__PURE__*/_jsxDEV(Form.Item, {\n                name: \"remember\",\n                valuePropName: \"checked\",\n                noStyle: true,\n                children: /*#__PURE__*/_jsxDEV(Checkbox, {\n                  children: \"Remember me\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 149,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 148,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 147,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Form.Item, {\n              children: [/*#__PURE__*/_jsxDEV(Button, {\n                type: \"primary\",\n                htmlType: \"submit\",\n                className: \"login-form-button\",\n                children: \"Log in\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 154,\n                columnNumber: 21\n              }, this), \"Or\", /*#__PURE__*/_jsxDEV(React.Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"a\", {\n                  className: \"register-link\",\n                  onClick: () => setRegister(true),\n                  children: \"Register Now\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 159,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(Drawer, {\n                  title: \"Create a new account\",\n                  width: 360,\n                  onClose: () => setRegister(false),\n                  visible: register,\n                  bodyStyle: {\n                    paddingBottom: 80\n                  },\n                  footer: /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      textAlign: 'right'\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(Button, {\n                      onClick: () => setRegister(false),\n                      style: {\n                        marginRight: 8\n                      },\n                      children: \"Cancel\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 174,\n                      columnNumber: 33\n                    }, this), /*#__PURE__*/_jsxDEV(Button, {\n                      onClick: registerAccount,\n                      type: \"primary\",\n                      children: \"Submit\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 177,\n                      columnNumber: 33\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 169,\n                    columnNumber: 33\n                  }, this),\n                  children: /*#__PURE__*/_jsxDEV(Form, {\n                    layout: \"vertical\",\n                    hideRequiredMark: true,\n                    children: [/*#__PURE__*/_jsxDEV(Row, {\n                      gutter: 16,\n                      children: /*#__PURE__*/_jsxDEV(Col, {\n                        children: /*#__PURE__*/_jsxDEV(Form.Item, {\n                          name: \"username\",\n                          label: \"Username\",\n                          rules: [{\n                            required: true,\n                            message: 'Please enter username'\n                          }],\n                          children: /*#__PURE__*/_jsxDEV(Input, {\n                            placeholder: \"Please enter username\",\n                            onChange: e => setRegisUsername(e.target.value),\n                            onKeyUp: enter_registerAccount\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 191,\n                            columnNumber: 45\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 186,\n                          columnNumber: 41\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 185,\n                        columnNumber: 37\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 184,\n                      columnNumber: 33\n                    }, this), /*#__PURE__*/_jsxDEV(Row, {\n                      gutter: 16,\n                      children: /*#__PURE__*/_jsxDEV(Col, {\n                        children: /*#__PURE__*/_jsxDEV(Form.Item, {\n                          name: \"password\",\n                          label: \"Password\",\n                          rules: [{\n                            required: true,\n                            message: 'Please enter password'\n                          }],\n                          children: /*#__PURE__*/_jsxDEV(Input, {\n                            placeholder: \"Please enter password\",\n                            type: \"password\",\n                            onChange: e => setRegisPassword(e.target.value),\n                            onKeyUp: enter_registerAccount\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 205,\n                            columnNumber: 45\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 200,\n                          columnNumber: 41\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 199,\n                        columnNumber: 37\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 198,\n                      columnNumber: 33\n                    }, this), /*#__PURE__*/_jsxDEV(Row, {\n                      gutter: 16,\n                      children: /*#__PURE__*/_jsxDEV(Col, {\n                        children: /*#__PURE__*/_jsxDEV(Form.Item, {\n                          name: \"Retype password\",\n                          label: \"Retype Password\",\n                          rules: [{\n                            required: true,\n                            message: 'Please retype password'\n                          }],\n                          children: /*#__PURE__*/_jsxDEV(Input, {\n                            placeholder: \"Please retype your password\",\n                            type: \"password\",\n                            onChange: e => setRegisRetype(e.target.value),\n                            onKeyUp: enter_registerAccount\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 219,\n                            columnNumber: 45\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 214,\n                          columnNumber: 41\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 213,\n                        columnNumber: 37\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 212,\n                      columnNumber: 33\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 183,\n                    columnNumber: 29\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 162,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 158,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 153,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 108,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Login, \"DquTQQY7sVR7dnRqJYNEysTw3Rk=\", false, function () {\n  return [useQuery, useMutation, useHistory];\n});\n\n_c = Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["C:/Users/HO_CHUN_WEI/Desktop/web/Jose-Antonio_LoverBus/src/containers/Login.js"],"names":["React","useState","useEffect","useCallback","useHistory","useQuery","useMutation","MapBox","AddPlace","SearchInfo","Form","Checkbox","Input","Layout","Menu","Breadcrumb","Button","Drawer","Col","Row","Select","DatePicker","LockOutlined","UserOutlined","PictureOutlined","EnvironmentOutlined","PlusOutlined","BrowserRouter","Router","Switch","Route","Link","useRouteMatch","useParams","TourPlan","SIGNIN_QUERY","SIGNUP_MUTATION","Login","username","setUsername","password","setPassword","register","setRegister","data","signIndata","error","signInError","variables","signUp","regisUsername","setRegisUsername","regisPassword","setRegisPassword","regisRetype","setRegisRetype","showUsermMenu","setShowUsermMenu","history","onFinish","values","console","log","push","signIn","alert","message","enter_registerAccount","event","keyCode","registerAccount","err","remember","required","paddingBottom","textAlign","marginRight","e","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useCallback } from \"react\"\r\nimport {useHistory} from 'react-router-dom';\r\nimport { useQuery, useMutation } from '@apollo/react-hooks'\r\nimport MapBox from \"../components/Mapbox_TW\"\r\nimport AddPlace from \"../components/AddPlace\"\r\nimport SearchInfo from \"../components/SearchInfo\"\r\nimport { Form, Checkbox, Input, Layout, Menu, Breadcrumb, Button, \r\n    Drawer, Col, Row, Select, DatePicker } from 'antd';\r\nimport { LockOutlined, UserOutlined, PictureOutlined, EnvironmentOutlined, PlusOutlined} from '@ant-design/icons';\r\n\r\nimport {\r\n    BrowserRouter as Router,\r\n    Switch,\r\n    Route,\r\n    Link,\r\n    useRouteMatch,\r\n    useParams\r\n} from \"react-router-dom\"; \r\nimport TourPlan from \"./TourPlan\"\r\n\r\nimport \"./TourMap.css\"\r\nimport 'antd/dist/antd.css'\r\nimport './Login.css'\r\n\r\nimport {\r\n//     // for query\r\n//     MARKER_QUERY,\r\n//     PLAN_QUERY,\r\n    SIGNIN_QUERY,\r\n//     // for mutation\r\n//     ADD_MARKER_MUTATION,\r\n//     DELETE_MARKER_MUTATION,\r\n//     UPDATE_MARKER_MUTATION,\r\n//     NEW_PLAN_MUTATION,\r\n//     RENAME_PLAN_MUTATION,\r\n//     DELETE_PLAN_MUTATION,\r\n//     NEW_SPOT_MUTATION,\r\n//     delete_Spot_MUTATION,\r\n//     UPDATE_SPOTSTARTTIME_MUTATION,\r\n//     UPDATE_SPOTENDTIME_MUTATION,\r\n    SIGNUP_MUTATION\r\n//     // for subscription\r\n  } from '../graphql'\r\n// import { Switch } from \"@material-ui/core\"\r\n\r\n\r\nexport default function Login(){\r\n    const [username, setUsername] = useState(\"\")\r\n    const [password, setPassword] = useState(\"\")\r\n    const [register, setRegister] = useState(false)\r\n    const {data:signIndata, error:signInError} = useQuery(SIGNIN_QUERY, {variables: {username, password}})\r\n    const [signUp]= useMutation(SIGNUP_MUTATION)\r\n    const[regisUsername, setRegisUsername] = useState(\"\")\r\n    const[regisPassword, setRegisPassword] = useState(\"\")\r\n    const[regisRetype, setRegisRetype] = useState(\"\")\r\n    const [showUsermMenu, setShowUsermMenu] = useState(false)\r\n\r\n    const history = useHistory();\r\n    // const handleRout = useCallback(() => history.push(`/${signIndata}`), [history]);\r\n\r\n    const onFinish = (values) => {\r\n        setUsername(values.username)\r\n        setPassword(values.password)\r\n    };\r\n\r\n    useEffect(() => {\r\n        console.log(signIndata)\r\n        if(signIndata) history.push(`/${signIndata.signIn}`)\r\n    }, [signIndata])\r\n\r\n    useEffect(() =>{\r\n        if(!signInError || !username) return\r\n        alert(signInError.message)\r\n    }, [signInError])\r\n    const enter_registerAccount = (event)=>{\r\n        if(event.keyCode===13){\r\n            registerAccount()\r\n        }\r\n    }\r\n    const registerAccount = async () => {\r\n        if(regisUsername === \"\"){\r\n            alert(\"Please enter username\")\r\n            return\r\n        }\r\n        if(regisPassword === \"\"){\r\n            alert(\"Please enter password\")\r\n            return\r\n        }\r\n        if(regisRetype === \"\"){\r\n            alert(\"Please retype password\")\r\n            return\r\n        }\r\n        if(regisPassword !== regisRetype){\r\n            alert(\"Password mismatch\")\r\n            return\r\n        }\r\n        try{\r\n            await signUp({variables: {username: regisUsername, password: regisPassword}})\r\n            alert(`Welcome to join us, ${regisUsername}!`)\r\n            setRegister(false)\r\n        }\r\n        catch(err){\r\n            alert(err)\r\n            return\r\n        }\r\n    }\r\n    return (\r\n    <React.Fragment>\r\n        <div className='login-background'>\r\n        <div className='login-root'>\r\n            <div className='login-section'>\r\n                <h5 className='login-title'>Welcome to Jose Antonio LoverBus !</h5>\r\n                <Form \r\n                name=\"normal_login\"\r\n                className=\"login-form\"\r\n                initialValues={{\r\n                    remember: true,\r\n                }}\r\n                onFinish={onFinish} // summit user info\r\n                >\r\n                <Form.Item\r\n                    name=\"username\"\r\n                    rules={[\r\n                    {\r\n                        required: true,\r\n                        message: 'Please input your Username!',\r\n                    },\r\n                    ]}\r\n                >\r\n                    <Input prefix={<UserOutlined className=\"site-form-item-icon\" />} placeholder=\"Username\" />\r\n                </Form.Item>\r\n                <Form.Item\r\n                    name=\"password\"\r\n                    rules={[\r\n                    {\r\n                        required: true,\r\n                        message: 'Please input your Password!',\r\n                    },\r\n                    ]}\r\n                >\r\n                    <Input\r\n                    prefix={<LockOutlined className=\"site-form-item-icon\" />}\r\n                    type=\"password\"\r\n                    placeholder=\"Password\"\r\n                    />\r\n                </Form.Item>\r\n                <Form.Item>\r\n                    <Form.Item name=\"remember\" valuePropName=\"checked\" noStyle>\r\n                    <Checkbox>Remember me</Checkbox>\r\n                    </Form.Item>\r\n                </Form.Item>\r\n\r\n                <Form.Item>\r\n                    <Button type=\"primary\" htmlType=\"submit\" className=\"login-form-button\">\r\n                    Log in\r\n                    </Button>\r\n                    Or  \r\n                    <React.Fragment>\r\n                        <a className='register-link' onClick={() => setRegister(true)}>\r\n                            Register Now\r\n                        </a>\r\n                        <Drawer\r\n                            title=\"Create a new account\"\r\n                            width={360}\r\n                            onClose={() => setRegister(false)}\r\n                            visible={register}\r\n                            bodyStyle={{ paddingBottom: 80 }}\r\n                            footer={\r\n                                <div\r\n                                    style={{\r\n                                        textAlign: 'right',\r\n                                }}\r\n                            >\r\n                                <Button onClick={() => setRegister(false)} style={{ marginRight: 8 }}>\r\n                                    Cancel\r\n                                </Button>\r\n                                <Button onClick={registerAccount} type=\"primary\">\r\n                                    Submit\r\n                                </Button>\r\n                            </div>\r\n                        }\r\n                        >\r\n                            <Form layout=\"vertical\" hideRequiredMark>\r\n                                <Row gutter={16}>\r\n                                    <Col>\r\n                                        <Form.Item\r\n                                            name=\"username\"\r\n                                            label=\"Username\"\r\n                                            rules={[{ required: true, message: 'Please enter username' }]}\r\n                                            >\r\n                                            <Input placeholder=\"Please enter username\"\r\n                                                onChange={e=>setRegisUsername(e.target.value)}\r\n                                                onKeyUp={enter_registerAccount}\r\n                                            />\r\n                                        </Form.Item>\r\n                                    </Col>\r\n                                </Row>\r\n                                <Row gutter={16}>\r\n                                    <Col>\r\n                                        <Form.Item\r\n                                            name=\"password\"\r\n                                            label=\"Password\"\r\n                                            rules={[{ required: true, message: 'Please enter password' }]}\r\n                                            >\r\n                                            <Input placeholder=\"Please enter password\" type=\"password\"\r\n                                                onChange={e=>setRegisPassword(e.target.value)}\r\n                                                onKeyUp={enter_registerAccount}\r\n                                            />\r\n                                        </Form.Item>\r\n                                    </Col>\r\n                                </Row>\r\n                                <Row gutter={16}>\r\n                                    <Col>\r\n                                        <Form.Item\r\n                                            name=\"Retype password\"\r\n                                            label=\"Retype Password\"\r\n                                            rules={[{ required: true, message: 'Please retype password' }]}\r\n                                            >\r\n                                            <Input placeholder=\"Please retype your password\" type=\"password\"\r\n                                                onChange={e=>setRegisRetype(e.target.value)}\r\n                                                onKeyUp={enter_registerAccount}\r\n                                            />\r\n                                        </Form.Item>\r\n                                    </Col>\r\n                                </Row>\r\n                            </Form>\r\n                        </Drawer>\r\n                    </React.Fragment>\r\n                </Form.Item>\r\n                </Form>\r\n                </div>\r\n            </div>\r\n            </div>\r\n    </React.Fragment>\r\n    )\r\n\r\n}"]},"metadata":{},"sourceType":"module"}