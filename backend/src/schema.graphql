type Query{
    Marker(username: String!): [Marker!]!
    Plan(username: String!, title: String!): Plan!
}

type Mutation{
    """
    clearAll is not supposed to be called by any user,
    the function is only called for debugging
    """
    clearAll: String
    
    # For marker
    addMarker(marker:addMarkerInput!): String
    deleteMarker(_id: ID!): String
    updateMarker(_id: ID!, newTitle: String, newDescription: String): String
    
    # For plan
    newPlan(username: String!, title: String!): String
    updatePlan(username: String!, newtitle: String!): String
}

type Subscription{
    subscribeUser(username: String!): subscribeUserOutput!
}

type Plan{
    title: String!
    spots: [Spot!]!
}

type Spot{
    time: Time!
    location: Marker!
}

type Time{
    year: Int # default 1900
    month: Int # default 1
    day: Int # default 1
    hour: Int # default 0
    minute: Int # default 0
}

input addMarkerInput{
    username: String!
    title: String!
    coordinates: [Float!]!
    description: String
}

type subscribeUserOutput{
    mutation: MutationType!
    data: Marker!
}

enum MutationType{
    NEW
    DELETE
    UPDATE
}

type Marker{
    username: String!
    properties: Properties!
    geometry: Geometry!
    _id: ID!
}

type Properties{
    title: String!
    description: String
}

type Geometry{
    coordinates: [Float!]!
}
